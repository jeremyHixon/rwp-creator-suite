// Content Repurposer Block Styles - Refactored with Shared Mixins
@import '../shared/styles/variables.scss';
@import '../shared/styles/mixins.scss';

.wp-block-rwp-creator-suite-content-repurposer {
    @apply blk-my-8 blk-font-sans;

    .rwp-content-repurposer-container {
        @apply blk-min-h-96 blk-w-full blk-relative;
        container-type: inline-size;
        
        @apply blk-bg-white blk-p-6 blk-rounded-xl blk-leading-relaxed blk-text-gray-700;
        
        @media (max-width: 640px) {
            @apply blk-p-4;
        }

        @container (max-width: 480px) {
            .rwp-platform-result .rwp-platform-header {
                @apply blk-flex-col blk-items-start blk-gap-2;
            }
            
            .rwp-content-version {
                @apply blk-p-4;
            }
        }
    }

    // Form Styles
    .rwp-repurposer-form {
        @apply blk-bg-gray-50 blk-rounded-xl blk-p-8 blk-mb-6;
        @apply blk-border blk-border-gray-200;
        
        @media (max-width: 640px) {
            @apply blk-p-5;
        }
    }

    // Include shared form input styles
    @include form-input-styles();

    // Include shared platform selection styles  
    @include platform-selection-styles();

    // Form Actions
    .rwp-form-actions {
        @apply blk-mt-8;
    }

    // Include primary button styles
    @include primary-button-styles('rwp-repurpose-button');

    // Usage Stats
    .rwp-usage-stats {
        @apply blk-bg-blue-50 blk-border blk-border-blue-300 blk-text-blue-800;
        @apply blk-py-3 blk-px-4 blk-rounded-md blk-text-xs blk-mt-4;
        @apply blk-flex blk-items-center blk-gap-2;

        strong {
            @apply blk-font-semibold;
        }
    }

    // Include shared results container styles
    @include results-container-styles();

    // Platform Results
    .rwp-platform-result {
        @apply blk-mb-4 blk-border blk-border-gray-200 blk-rounded-lg blk-p-5;
        @apply blk-transition-all blk-duration-200 blk-bg-gray-50;

        &:hover {
            @apply blk-border-blue-500 blk-shadow-md;
        }

        &.rwp-result-error {
            @apply blk-border-red-300 blk-bg-red-50;
        }

        .rwp-platform-header {
            @apply blk-flex blk-justify-between blk-items-center blk-mb-4;

            .rwp-platform-name {
                @apply blk-font-semibold blk-text-gray-700 blk-capitalize blk-text-lg;
            }

            .rwp-character-limit {
                @apply blk-text-xs blk-text-blue-600 blk-bg-blue-50 blk-py-1 blk-px-3;
                @apply blk-rounded-md blk-inline-block blk-capitalize;
            }
        }

        .rwp-content-versions {
            @apply blk-flex blk-flex-col blk-gap-4;
        }

        .rwp-content-version {
            @apply blk-bg-white blk-border blk-border-gray-200 blk-rounded-lg blk-p-5;
            @apply blk-transition-all blk-duration-200 blk-relative;

            .rwp-version-text {
                @apply blk-text-sm blk-leading-relaxed blk-text-gray-600 blk-mb-4;
                white-space: pre-wrap;
            }

            .rwp-version-meta {
                @apply blk-flex blk-justify-between blk-items-center;
            }
        }

        // Include secondary button styles for copy buttons
        @include secondary-button-styles('rwp-copy-button');

        .rwp-copy-button {
            &.rwp-copied {
                @apply blk-bg-green-600 blk-text-white blk-border-green-600;
                
                &:hover {
                    @apply blk-bg-green-700;
                }
            }
        }

        .rwp-error-text {
            @apply blk-text-red-600 blk-italic;
        }
    }

    // Error Message
    .rwp-error-message {
        @apply blk-bg-red-50 blk-border blk-border-red-300 blk-rounded-md;
        @apply blk-p-4 blk-my-6 blk-text-center;

        .rwp-error-content {
            @apply blk-text-red-700 blk-text-sm blk-font-medium;
        }
    }

    // Include shared loading states
    @include loading-states();

    // Include shared character counter styles
    @include character-counter-styles();

    // Include shared guest/upgrade styles
    @include guest-upgrade-styles();

    // Content Repurposer specific guest styles
    .rwp-repurposer-guest-teaser {
        @extend .rwp-guest-teaser;
    }

    .rwp-repurposer-guest {
        @apply blk-bg-blue-50 blk-rounded-xl blk-p-8 blk-mb-6;
        @apply blk-border blk-border-blue-300;

        @media (max-width: 640px) {
            @apply blk-p-6;
        }
    }

    .rwp-guest-attempts-counter {
        @apply blk-text-center blk-mb-6 blk-py-3 blk-px-4 blk-bg-blue-100;
        @apply blk-rounded-lg blk-border blk-border-blue-300;
    }

    .rwp-attempts-remaining {
        @apply blk-text-sm blk-font-semibold blk-text-blue-800;
    }

    .rwp-attempts-count {
        @apply blk-text-xl blk-font-bold blk-text-blue-600;
    }

    .rwp-guest-upgrade-hint {
        @apply blk-text-center blk-mt-4 blk-py-3 blk-bg-blue-50 blk-rounded-lg;
        @apply blk-border blk-border-blue-200;

        p {
            @apply blk-text-xs blk-text-blue-800 blk-m-0 blk-italic;
        }
    }

    // Guest button with different styling
    .rwp-guest-repurpose-button {
        @apply blk-bg-green-600 blk-text-white blk-border-0;
        @apply blk-py-3 blk-px-6 blk-text-sm blk-font-semibold;
        @apply blk-rounded-lg blk-cursor-pointer blk-transition-colors blk-duration-200;
        @apply blk-min-w-32 blk-relative;

        &:hover:not(:disabled) {
            @apply blk-bg-green-700;
        }
        
        &:focus:not(:disabled) {
            @apply blk-bg-green-700 blk-outline-2 blk-outline-green-500 blk-outline-offset-2;
        }

        &:active:not(:disabled) {
            @apply blk-bg-green-800;
        }

        &:disabled {
            @apply blk-opacity-50 blk-cursor-not-allowed;
        }

        &.rwp-loading {
            @apply blk-text-transparent;

            &::after {
                content: '';
                @apply blk-absolute blk-top-1/2 blk-left-1/2 blk-w-4 blk-h-4;
                @apply blk-border-2 blk-border-transparent blk-border-t-white;
                @apply blk-rounded-full;
                margin: -8px 0 0 -8px;
                animation: spin 1s linear infinite;
            }
        }
    }

    // Success Notifications
    .rwp-success-notification {
        @apply blk-fixed blk-top-5 blk-right-5 blk-bg-green-50 blk-text-green-800;
        @apply blk-py-4 blk-px-5 blk-rounded-lg blk-border-2 blk-border-green-300;
        @apply blk-z-50 blk-text-sm blk-font-medium blk-shadow-lg;
        animation: slideInRight 0.3s ease;
    }

    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    // Guest exhausted state (unique to content-repurposer)
    .rwp-guest-exhausted-message {
        @apply blk-bg-gradient-to-br blk-from-blue-50 blk-to-blue-100;
        @apply blk-rounded-xl blk-p-10 blk-text-center blk-border blk-border-blue-300 blk-my-6;

        @media (max-width: 640px) {
            @apply blk-p-8;
        }
    }

    .rwp-exhausted-content {
        @apply blk-max-w-lg blk-mx-auto;

        h3 {
            @apply blk-text-2xl blk-font-bold blk-text-gray-700 blk-mb-3;
        }

        p {
            @apply blk-text-base blk-text-gray-500 blk-leading-relaxed blk-mb-6;
        }
    }

    .rwp-exhausted-icon {
        @apply blk-text-6xl blk-mb-4 blk-block;
    }

    .rwp-upgrade-benefits {
        @apply blk-grid blk-grid-cols-1 blk-gap-3 blk-my-6 blk-text-left;

        @media (max-width: 640px) {
            @apply blk-gap-2;
        }
    }

    .rwp-upgrade-benefit {
        @apply blk-flex blk-items-center blk-gap-3 blk-py-3 blk-px-4 blk-bg-white;
        @apply blk-rounded-lg blk-border blk-border-gray-200 blk-text-sm;
        @apply blk-text-gray-600 blk-font-medium;

        @media (max-width: 640px) {
            @apply blk-py-2 blk-px-3 blk-text-xs;
        }
    }

    .rwp-benefit-icon {
        @apply blk-text-xl blk-flex-shrink-0;
    }

    // Guest preview/limited content styles
    .rwp-platform-result.rwp-guest-limited {
        @apply blk-bg-gradient-to-br blk-from-gray-50 blk-to-gray-100;
        @apply blk-border blk-border-gray-300 blk-relative;

        &::before {
            content: '';
            @apply blk-absolute blk-top-0 blk-left-0 blk-right-0 blk-h-1;
            background: linear-gradient(90deg, #f59e0b, #d97706);
            @apply blk-rounded-t-lg;
        }
    }

    .rwp-preview-badge {
        @apply blk-bg-amber-100 blk-text-amber-800 blk-text-xs blk-font-semibold;
        @apply blk-py-1 blk-px-3 blk-rounded-md blk-uppercase blk-tracking-wide;
    }

    .rwp-content-version.rwp-guest-preview {
        @apply blk-bg-white blk-border-2 blk-border-dashed blk-border-gray-300;
        @apply blk-relative blk-overflow-hidden;

        &::before {
            content: '';
            @apply blk-absolute blk-bottom-0 blk-left-0 blk-right-0 blk-h-12;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.9));
            pointer-events: none;
        }
    }

    // Include shared accessibility styles
    @include accessibility-styles();
}